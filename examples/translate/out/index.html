<!DOCTYPE html>
<html>
<head>
  <title>Custom Translate Widget</title>
  <style type="text/css">body{margin:0;font-size:14px;-webkit-font-smoothing:antialiased}input[type="text"],input[type="email"],input[type="number"]{border:1px solid #969fa6;box-sizing:border-box;width:100%;height:33px;padding:6px;border-radius:3px}input[type="text"]:focus,input[type="email"]:focus,input[type="number"]:focus{background-color:#fff;border-color:#1683d0;box-shadow:0 0 3px #a4c7f1 inset;outline:none}input[type="submit"]{padding:.4rem .8rem;font-size:.75rem;font-weight:500;display:inline-block;outline:0;cursor:pointer;text-align:center;white-space:nowrap;border:1px solid #3c80cf;border-radius:2px;line-height:18px;color:#fff;background:linear-gradient(to top,#3c80cf,#5b9fef);transition-duration:.1s;transition-property:all;background-size:100% 200%;margin-top:10px}input[type="submit"]:hover{border-color:#3072be;background:linear-gradient(to top,#3c80cf,#5b9fef);background-position:0 100%}input[type="submit"].disabled{cursor:default;opacity:.4}</style>
</head>
<body>
  <script>!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var r=n(1);window.addEventListener("message",r(window),!1)},function(t,e,n){"use strict";function r(t){if("http://app.joistio.com:8888"!==t)throw new Error("Cannot handle message from untrusted origin")}var o=n(2),i=n(3).create(),s=n(4);t.exports=function(t){var e,n,a,u=t;return function(t){r(t.origin);var c=t.data.data,f=t.data.label;switch(f){case"initialize":n=c.iframeId,a=o.create(u,n),e=s(c);var l=new CustomEvent("cfWidgetReady",{detail:e});u.dispatchEvent(l),a.send("widgetApiIsReady");break;case"updateFieldValue":e.field._setValue(c),e.field.observers.forEach(function(t){t(c)});break;case"updateFields":e.fields._update(c.fields),e.fields.observers.forEach(function(t){t(e.fields)});break;case"returnSpaceMethodCall":var d=c.response;delete c.response;var p=c.error;delete c.error;var h=i.pop(c.requestId);d?h.resolve(d):h.reject(p);break;case"confirmedDialog":i.pop(c.requestId).resolve(c.actionData);break;case"closedDialog":i.pop(c.requestId).reject(c.actionData);break;default:throw new Error("Contentful Widgets: Message "+f+" from parent page not recognized.")}}}},function(t,e){"use strict";function n(t,e){this.window=t,this.iframeId=e}n.prototype.send=function(t,e){this.window.parent.postMessage({label:t,iframeId:this.iframeId,data:e||{}},"http://app.joistio.com:8888")},t.exports={create:function(t,e){return this.dispatcher=new n(t,e),this.dispatcher},get:function(){return this.dispatcher}}},function(t,e){"use strict";function n(){this.promises={}}n.prototype.push=function(t,e,n){this.promises[t]={resolve:e,reject:n}},n.prototype.pop=function(t){var e=this.promises[t];return delete this.promises[t],e},t.exports={create:function(){return this.requestPromises=new n,this.requestPromises},get:function(){return this.requestPromises}}},function(t,e,n){"use strict";function r(){var t={};return["getEntry","getAsset","getContentType","getEntries","getAssets","getContentTypes","createEntry","createAsset","createContentType"].forEach(function(e){t[e]=o(e)}),t}function o(t){return function(){return a("callMethodOnSpace",{method:t,args:Array.prototype.slice.call(arguments)})}}function i(){return{open:function(t){return a("openDialog",t)},confirm:function(t){u.send("confirmDialog",t)},cancel:function(t){u.send("closeDialog",t)},setState:function(t){u.send("setDialogState",t)}}}function s(){return{setSize:function(t,e){u.send("setIframeSize",{width:t,height:e})},resize:function(){console.log("resizing iframe",h.offsetWidth,h.offsetHeight),u.send("setIframeSize",{width:h.offsetWidth,height:h.offsetHeight})},setupAutoResizer:function(){var t=new MutationObserver(function(t){t.forEach(function(){(h.offsetHeight!==p.height||h.offsetWidth!==p.width)&&(console.log("auto resizing iframe",h.offsetWidth,h.offsetHeight),u.send("setIframeSize",{width:h.offsetWidth,height:h.offsetHeight}))})});t.observe(h,{attributes:!0,childList:!0,subtree:!0})}}}function a(t,e){return new c(function(n,r){e.requestId=t+"-"+Math.ceil(1e8*Math.random()),u.send(t,e),d.push(e.requestId,n,r)})}var u,c=n(5).Promise,f=n(10),l=n(2),d=n(3).get();t.exports=function(t){u=l.get();var e={fields:f.create({fields:t.fields,locales:t.locales}),currentFieldLocale:t.fieldLocale,defaultLocale:t.defaultLocale,locales:t.locales,space:r(),dialog:i(),window:s()};return t.inDialog||(e.widgetParams=t.widgetParams,e.field=f.createCurrentField({field:e.fields.get(t.fieldApiName),fieldLocale:t.fieldLocale,locales:t.locales})),e};var p={height:0,width:0},h=window.document.body},function(t,e,n){var r;(function(t,o,i){(function(){"use strict";function s(t){return"function"==typeof t||"object"==typeof t&&null!==t}function a(t){return"function"==typeof t}function u(t){return"object"==typeof t&&null!==t}function c(t){B=t}function f(t){X=t}function l(){return function(){t.nextTick(g)}}function d(){return function(){U(g)}}function p(){var t=0,e=new tt(g),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function h(){var t=new MessageChannel;return t.port1.onmessage=g,function(){t.port2.postMessage(0)}}function v(){return function(){setTimeout(g,1)}}function g(){for(var t=0;Q>t;t+=2){var e=rt[t],n=rt[t+1];e(n),rt[t]=void 0,rt[t+1]=void 0}Q=0}function m(){try{var t=n(8);return U=t.runOnLoop||t.runOnContext,d()}catch(e){return v()}}function y(){}function _(){return new TypeError("You cannot resolve a promise with itself")}function w(){return new TypeError("A promises callback cannot return that same promise.")}function b(t){try{return t.then}catch(e){return at.error=e,at}}function A(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function E(t,e,n){X(function(t){var r=!1,o=A(n,e,function(n){r||(r=!0,e!==n?j(t,n):C(t,n))},function(e){r||(r=!0,I(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,I(t,o))},t)}function x(t,e){e._state===it?C(t,e._result):e._state===st?I(t,e._result):P(e,void 0,function(e){j(t,e)},function(e){I(t,e)})}function S(t,e){if(e.constructor===t.constructor)x(t,e);else{var n=b(e);n===at?I(t,at.error):void 0===n?C(t,e):a(n)?E(t,e,n):C(t,e)}}function j(t,e){t===e?I(t,_()):s(e)?S(t,e):C(t,e)}function L(t){t._onerror&&t._onerror(t._result),T(t)}function C(t,e){t._state===ot&&(t._result=e,t._state=it,0!==t._subscribers.length&&X(T,t))}function I(t,e){t._state===ot&&(t._state=st,t._result=e,X(L,t))}function P(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+it]=n,o[i+st]=r,0===i&&t._state&&X(T,t)}function T(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,o,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?M(n,r,o,i):o(i);t._subscribers.length=0}}function V(){this.error=null}function k(t,e){try{return t(e)}catch(n){return ut.error=n,ut}}function M(t,e,n,r){var o,i,s,u,c=a(n);if(c){if(o=k(n,r),o===ut?(u=!0,i=o.error,o=null):s=!0,e===o)return void I(e,w())}else o=r,s=!0;e._state!==ot||(c&&s?j(e,o):u?I(e,i):t===it?C(e,o):t===st&&I(e,o))}function O(t,e){try{e(function(e){j(t,e)},function(e){I(t,e)})}catch(n){I(t,n)}}function z(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(y),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?C(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&C(n.promise,n._result))):I(n.promise,n._validationError())}function D(t){return new ct(this,t).promise}function F(t){function e(t){j(o,t)}function n(t){I(o,t)}var r=this,o=new r(y);if(!J(t))return I(o,new TypeError("You must pass an array to race.")),o;for(var i=t.length,s=0;o._state===ot&&i>s;s++)P(r.resolve(t[s]),void 0,e,n);return o}function W(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(y);return j(n,t),n}function q(t){var e=this,n=new e(y);return I(n,t),n}function N(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function H(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function R(t){this._id=ht++,this._state=void 0,this._result=void 0,this._subscribers=[],y!==t&&(a(t)||N(),this instanceof R||H(),O(this,t))}function Y(){var t;if("undefined"!=typeof o)t=o;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(t.Promise=vt)}var K;K=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var U,B,G,J=K,Q=0,X=({}.toString,function(t,e){rt[Q]=t,rt[Q+1]=e,Q+=2,2===Q&&(B?B(g):G())}),Z="undefined"!=typeof window?window:void 0,$=Z||{},tt=$.MutationObserver||$.WebKitMutationObserver,et="undefined"!=typeof t&&"[object process]"==={}.toString.call(t),nt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,rt=new Array(1e3);G=et?l():tt?p():nt?h():void 0===Z?m():v();var ot=void 0,it=1,st=2,at=new V,ut=new V;z.prototype._validateInput=function(t){return J(t)},z.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},z.prototype._init=function(){this._result=new Array(this.length)};var ct=z;z.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,r=t._input,o=0;n._state===ot&&e>o;o++)t._eachEntry(r[o],o)},z.prototype._eachEntry=function(t,e){var n=this,r=n._instanceConstructor;u(t)?t.constructor===r&&t._state!==ot?(t._onerror=null,n._settledAt(t._state,e,t._result)):n._willSettleAt(r.resolve(t),e):(n._remaining--,n._result[e]=t)},z.prototype._settledAt=function(t,e,n){var r=this,o=r.promise;o._state===ot&&(r._remaining--,t===st?I(o,n):r._result[e]=n),0===r._remaining&&C(o,r._result)},z.prototype._willSettleAt=function(t,e){var n=this;P(t,void 0,function(t){n._settledAt(it,e,t)},function(t){n._settledAt(st,e,t)})};var ft=D,lt=F,dt=W,pt=q,ht=0,vt=R;R.all=ft,R.race=lt,R.resolve=dt,R.reject=pt,R._setScheduler=c,R._setAsap=f,R._asap=X,R.prototype={constructor:R,then:function(t,e){var n=this,r=n._state;if(r===it&&!t||r===st&&!e)return this;var o=new this.constructor(y),i=n._result;if(r){var s=arguments[r-1];X(function(){M(r,o,s,i)})}else P(n,o,t,e);return o},"catch":function(t){return this.then(null,t)}};var gt=Y,mt={Promise:vt,polyfill:gt};n(9).amd?(r=function(){return mt}.call(e,n,e,i),!(void 0!==r&&(i.exports=r))):"undefined"!=typeof i&&i.exports?i.exports=mt:"undefined"!=typeof this&&(this.ES6Promise=mt),gt()}).call(this)}).call(e,n(6),function(){return this}(),n(7)(t))},function(t,e){function n(){c=!1,s.length?u=s.concat(u):f=-1,u.length&&r()}function r(){if(!c){var t=setTimeout(n);c=!0;for(var e=u.length;e;){for(s=u,u=[];++f<e;)s&&s[f].run();f=-1,e=u.length}s=null,c=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function i(){}var s,a=t.exports={},u=[],c=!1,f=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new o(t,e)),1!==u.length||c||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=i,a.addListener=i,a.once=i,a.off=i,a.removeListener=i,a.removeAllListeners=i,a.emit=i,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){"use strict";function r(t,e){this.observers=[],this.fields={};for(var n in t)this.fields[n]=new o(n,t[n],e)}function o(t,e,n){this.observers=[],this.data={},this.apiName=t,n.forEach(function(t){o.prototype._setValue.call(this,t,e&&e[t])},this)}function i(t,e,n,r){o.call(this,t,e,n),this._currentLocale=r}var s,a=n(2);r.prototype._update=function(t){var e;for(var n in t){e=t[n];for(var r in e)this.fields[n]._setValue(r,e[r])}},r.prototype.getAll=function(){return this.fields},r.prototype.get=function(t){return this.fields[t]},r.prototype.addObserver=function(t){this.observers.push(t)},o.prototype.getValue=function(t){return this.data[t]},o.prototype._setValue=function(t,e){this.data[t]=e||null},o.prototype.setValue=function(t,e){this._setValue(t,e),s.send("setFieldValue",{apiName:this.apiName,value:this.data})},o.prototype.addObserver=function(t){this.observers.push(t)},i.prototype=Object.create(o.prototype),i.prototype.getValue=function(){return this.data[this._currentLocale]},i.prototype._setValue=function(t){o.prototype._setValue.call(this,this._currentLocale,t)},i.prototype.setValue=function(t){this._setValue(t),s.send("setWidgetFieldValue",{value:this.data[this._currentLocale]})},t.exports={create:function(t){return s=a.get(),new r(t.fields,t.locales)},createCurrentField:function(t){return new i(t.field.apiName,t.field.data,t.locales,t.fieldLocale)}}}]);</script>
  <script>"use strict";+function(){function e(e,t){return new Promise(function(n,i){var l="https://translate.yandex.net/api/v1.5/tr.json/translate?key="+a.apiKey+"&lang="+t+"&text="+encodeURIComponent(e),d=new XMLHttpRequest;d.open("GET",l,!0),d.send(),d.onreadystatechange=function(){4===d.readyState&&200===d.status?n(JSON.parse(d.response)):setTimeout(function(){i()},200)}})}function t(e,t,n){var i,a=document.createElement(e);for(i in t)a[i]=t[i];return n=n||document.body,n.appendChild(a),a}function n(t,n,i){e(t,n).then(function(e){var t=e.text.join(" "),n=a.cfApi.field.apiName;a.cfApi.fields.fields[n].setValue(i,t)})}function i(e,t){function n(e){var t={"en-US":"en","de-DE":"de","fr-FR":"fr"};return t[e]?t[e]:e.substring(0,2)}return n(e)+"-"+n(t)}var a={};a.apiKey="trnsl.1.1.20151015T080754Z.fac48f0d13a96c3a.c0c58058288c42ba40de8aec2b36d9d86c3adb1d",a.events={initialize:function(){window.addEventListener("cfWidgetReady",this.widgetReady)},widgetReady:function(e){a.cfApi=e.detail,a.elements={input:t("input",{type:"text"}),defaultLanguage:t("div"),populateAll:t("input",{type:"submit",value:"Populate all other locales"},t("div"))},a.elements.input.addEventListener("input",a.events.textUpdated),a.elements.populateAll.addEventListener("click",a.events.doTranslations),a.cfApi.defaultLocale!==a.cfApi.currentFieldLocale&&a.cfApi.fields.addObserver(a.events.fieldsUpdated),a.events.fieldsUpdated(a.cfApi.fields);var n=a.cfApi.defaultLocale===a.cfApi.currentFieldLocale;a.cfApi.defaultLocale!==a.cfApi.currentFieldLocale&&a.uiUpdate.hideElement(a.elements.populateAll),a.cfApi.window.setSize(300,n?50:15)},fieldsUpdated:function(){var e="object"!=typeof a.cfApi.field.getValue()?a.cfApi.field.getValue():null;a.uiUpdate.updateInput(e),a.cfApi.defaultLocale===a.cfApi.currentFieldLocale?a.uiUpdate.enableElement(a.elements.populateAll,!!e):a.cfApi.field.setValue(e)},textUpdated:function(){var e=a.elements.input.value.toString();a.cfApi.field.setValue(e),a.events.fieldsUpdated(a.cfApi.fields)},doTranslations:function(e){e.preventDefault();var t=a.cfApi.currentFieldLocale,l=a.cfApi.locales.indexOf(t),d=a.cfApi.locales.slice();d.splice(l,1);var c,u=a.cfApi.field.getValue();d.forEach(function(e){c=i(t,e),n(u,c,e)})}},a.uiUpdate={updateInput:function(e){e="object"==typeof e?null:e,a.elements.input.value=e},enableElement:function(e,t){e.className=t===!0?"":"disabled"},hideElement:function(e){e.style.display="none"}},a.events.initialize()}();</script>
</body>
</html>